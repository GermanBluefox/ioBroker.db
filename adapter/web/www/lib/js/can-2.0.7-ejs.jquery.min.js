/*!
 * CanJS - 2.0.7
 * http://canjs.us/
 * Copyright (c) 2014 Bitovi
 * Fri, 18 Apr 2014 20:23:14 GMT
 * Licensed MIT
 * Includes: can/construct/construct.js,can/map/map.js,can/list/list.js,can/compute/compute.js,can/model/model.js,can/view/view.js,can/control/control.js,can/route/route.js,can/control/route/route.js,can/view/ejs/ejs.js
 * Download from: http://bitbuilder.herokuapp.com/can.custom.js?configuration=jquery&minify=true&plugins=can%2Fconstruct%2Fconstruct.js&plugins=can%2Fmap%2Fmap.js&plugins=can%2Flist%2Flist.js&plugins=can%2Fcompute%2Fcompute.js&plugins=can%2Fmodel%2Fmodel.js&plugins=can%2Fview%2Fview.js&plugins=can%2Fcontrol%2Fcontrol.js&plugins=can%2Froute%2Froute.js&plugins=can%2Fcontrol%2Froute%2Froute.js&plugins=can%2Fview%2Fejs%2Fejs.js
 */
(function(undefined){var __m5=function(){var t=window.can||{};("undefined"==typeof GLOBALCAN||GLOBALCAN!==!1)&&(window.can=t),t.isDeferred=function(t){var e=this.isFunction;return t&&e(t.then)&&e(t.pipe)};var e=0;return t.cid=function(t,n){return t._cid||(e++,t._cid=(n||"")+e),t._cid},t.VERSION="@EDGE",t.simpleExtend=function(t,e){for(var n in e)t[n]=e[n];return t},t}(),__m6=function(t){return t.each=function(e,n,r){var i,a=0;if(e)if("number"==typeof e.length&&e.pop)for(e.attr&&e.attr("length"),i=e.length;i>a&&n.call(r||e[a],e[a],a,e)!==!1;a++);else if(e.hasOwnProperty){t.Map&&e instanceof t.Map&&(t.__reading&&t.__reading(e,"__keys"),e=e.__get());for(i in e)if(e.hasOwnProperty(i)&&n.call(r||e[i],e[i],i,e)===!1)break}return e},t}(__m5),__m7=function(t){t.inserted=function(e){e=t.makeArray(e);for(var n,r,i=!1,a=t.$(document.contains?document:document.body),s=0;(r=e[s])!==undefined;s++){if(!i){if(!r.getElementsByTagName)continue;if(!t.has(a,r).length)return;i=!0}if(i&&r.getElementsByTagName){n=t.makeArray(r.getElementsByTagName("*")),t.trigger(r,"inserted",[],!1);for(var o,u=0;(o=n[u])!==undefined;u++)t.trigger(o,"inserted",[],!1)}}},t.appendChild=function(e,n){var r;r=11===n.nodeType?t.makeArray(n.childNodes):[n],e.appendChild(n),t.inserted(r)},t.insertBefore=function(e,n,r){var i;i=11===n.nodeType?t.makeArray(n.childNodes):[n],e.insertBefore(n,r),t.inserted(i)}}(__m5),__m8=function(t){return t.addEvent=function(t,e){var n=this.__bindEvents||(this.__bindEvents={}),r=n[t]||(n[t]=[]);return r.push({handler:e,name:t}),this},t.listenTo=function(e,n,r){var i=this.__listenToEvents;i||(i=this.__listenToEvents={});var a=t.cid(e),s=i[a];s||(s=i[a]={obj:e,events:{}});var o=s.events[n];o||(o=s.events[n]=[]),o.push(r),t.bind.call(e,n,r)},t.stopListening=function(e,n,r){var i=this.__listenToEvents,a=i,s=0;if(!i)return this;if(e){var o=t.cid(e);if((a={})[o]=i[o],!i[o])return this}for(var u in a){var c,h=a[u];e=i[u].obj,n?(c={})[n]=h.events[n]:c=h.events;for(var l in c){var p=c[l]||[];for(s=0;p.length>s;)r&&r===p[s]||!r?(t.unbind.call(e,l,p[s]),p.splice(s,1)):s++;p.length||delete h.events[l]}t.isEmptyObject(h.events)&&delete i[u]}return this},t.removeEvent=function(t,e){if(!this.__bindEvents)return this;for(var n,r=this.__bindEvents[t]||[],i=0,a="function"==typeof e;r.length>i;)n=r[i],a&&n.handler===e||!a&&n.cid===e?r.splice(i,1):i++;return this},t.dispatch=function(t,e){if(this.__bindEvents){"string"==typeof t&&(t={type:t});var n,r=t.type,i=(this.__bindEvents[r]||[]).slice(0);e=[t].concat(e||[]);for(var a=0,s=i.length;s>a;a++)n=i[a],n.handler.apply(this,e)}},t}(__m5),__m3=function(t,e){var n=function(t){return t.nodeName&&(1===t.nodeType||9===t.nodeType)||t==window};t.extend(e,t,{trigger:function(r,i,a){n(r)?t.event.trigger(i,a,r,!0):r.trigger?r.trigger(i,a):("string"==typeof i&&(i={type:i}),i.target=i.target||r,e.dispatch.call(r,i,a))},addEvent:e.addEvent,removeEvent:e.removeEvent,buildFragment:function(e,n){var r,i=t.buildFragment;return e=[e],n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,r=i.call(jQuery,e,n),r.cacheable?t.clone(r.fragment):r.fragment||r},$:t,each:e.each,bind:function(r,i){return this.bind&&this.bind!==e.bind?this.bind(r,i):n(this)?t.event.add(this,r,i):e.addEvent.call(this,r,i),this},unbind:function(r,i){return this.unbind&&this.unbind!==e.unbind?this.unbind(r,i):n(this)?t.event.remove(this,r,i):e.removeEvent.call(this,r,i),this},delegate:function(e,r,i){return this.delegate?this.delegate(e,r,i):n(this)&&t(this).delegate(e,r,i),this},undelegate:function(e,r,i){return this.undelegate?this.undelegate(e,r,i):n(this)&&t(this).undelegate(e,r,i),this},proxy:function(t,e){return function(){return t.apply(e,arguments)}}}),e.on=e.bind,e.off=e.unbind,t.each(["append","filter","addClass","remove","data","get","has"],function(t,n){e[n]=function(t){return t[n].apply(t,e.makeArray(arguments).slice(1))}});var r=t.cleanData;t.cleanData=function(n){t.each(n,function(t,n){n&&e.trigger(n,"removed",[],!1)}),r(n)};var i,a=t.fn.domManip;return t.fn.domManip=function(){for(var t=1;arguments.length>t;t++)if("function"==typeof arguments[t]){i=t;break}return a.apply(this,arguments)},t(document.createElement("div")).append(document.createElement("div")),t.fn.domManip=2===i?function(t,n,r){return a.call(this,t,n,function(t){var n=11===t.nodeType?e.makeArray(t.childNodes):null,i=r.apply(this,arguments);return e.inserted(n?n:[t]),i})}:function(t,n){return a.call(this,t,function(t){var r=11===t.nodeType?e.makeArray(t.childNodes):null,i=n.apply(this,arguments);return e.inserted(r?r:[t]),i})},t.event.special.inserted={},t.event.special.removed={},e}(jQuery,__m5,__m6,__m7,__m8),__m2=function(t){var e=/_|-/,n=/\=\=/,r=/([A-Z]+)([A-Z][a-z])/g,i=/([a-z\d])([A-Z])/g,a=/([a-z\d])([A-Z])/g,s=/\{([^\}]+)\}/g,o=/"/g,u=/'/g,c=/-+(.)?/g,h=/[a-z][A-Z]/g,l=function(t,e,n){var r=t[e];return r===undefined&&n===!0&&(r=t[e]={}),r},p=function(t){return/^f|^o/.test(typeof t)},f=function(t){var e=null===t||t===undefined||isNaN(t)&&"NaN"==""+t;return""+(e?"":t)};return t.extend(t,{esc:function(t){return f(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(o,"&#34;").replace(u,"&#39;")},getObject:function(e,n,r){var i,a,s,o,u=e?e.split("."):[],c=u.length,h=0;if(n=t.isArray(n)?n:[n||window],o=n.length,!c)return n[0];for(h;o>h;h++){for(i=n[h],s=undefined,a=0;c>a&&p(i);a++)s=i,i=l(s,u[a]);if(s!==undefined&&i!==undefined)break}if(r===!1&&i!==undefined&&delete s[u[a-1]],r===!0&&i===undefined)for(i=n[0],a=0;c>a&&p(i);a++)i=l(i,u[a],!0);return i},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},camelize:function(t){return f(t).replace(c,function(t,e){return e?e.toUpperCase():""})},hyphenate:function(t){return f(t).replace(h,function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()})},underscore:function(t){return t.replace(n,"/").replace(r,"$1_$2").replace(i,"$1_$2").replace(a,"_").toLowerCase()},sub:function(e,n,r){var i=[];return e=e||"",i.push(e.replace(s,function(e,a){var s=t.getObject(a,n,r===!0?!1:undefined);return s===undefined||null===s?(i=null,""):p(s)&&i?(i.push(s),""):""+s})),null===i?i:1>=i.length?i[0]:i},replacer:s,undHash:e}),t}(__m3),__m1=function(t){var e=0;return t.Construct=function(){return arguments.length?t.Construct.extend.apply(t.Construct,arguments):undefined},t.extend(t.Construct,{constructorExtends:!0,newInstance:function(){var t,e=this.instance();return e.setup&&(t=e.setup.apply(e,arguments)),e.init&&e.init.apply(e,t||arguments),e},_inherit:function(e,n,r){t.extend(r||e,e||{})},_overwrite:function(t,e,n,r){t[n]=r},setup:function(e){this.defaults=t.extend(!0,{},e.defaults,this.defaults)},instance:function(){e=1;var t=new this;return e=0,t},extend:function(n,r,i){function a(){return e?undefined:this.constructor!==a&&arguments.length&&a.constructorExtends?a.extend.apply(a,arguments):a.newInstance.apply(a,arguments)}"string"!=typeof n&&(i=r,r=n,n=null),i||(i=r,r=null),i=i||{};var s,o,u,c,h,l,p,f,d=this,g=this.prototype;f=this.instance(),t.Construct._inherit(i,g,f);for(h in d)d.hasOwnProperty(h)&&(a[h]=d[h]);t.Construct._inherit(r,d,a),n&&(s=n.split("."),l=s.pop(),o=t.getObject(s.join("."),window,!0),p=o,u=t.underscore(n.replace(/\./g,"_")),c=t.underscore(l),o[l]=a),t.extend(a,{constructor:a,prototype:f,namespace:p,_shortName:c,fullName:n,_fullName:u}),l!==undefined&&(a.shortName=l),a.prototype.constructor=a;var m=[d].concat(t.makeArray(arguments)),_=a.setup.apply(a,m);return a.init&&a.init.apply(a,_||m),a}}),t.Construct.prototype.setup=function(){},t.Construct.prototype.init=function(){},t.Construct}(__m2),__m10=function(t){return t.bindAndSetup=function(){return t.addEvent.apply(this,arguments),this._init||(this._bindings?this._bindings++:(this._bindings=1,this._bindsetup&&this._bindsetup())),this},t.unbindAndTeardown=function(){return t.removeEvent.apply(this,arguments),null===this._bindings?this._bindings=0:this._bindings--,!this._bindings&&this._bindteardown&&this._bindteardown(),this},t}(__m3),__m11=function(t){var e=1,n=0,r=[],i=[];t.batch={start:function(t){n++,t&&i.push(t)},stop:function(a,s){if(a?n=0:n--,0===n){var o=r.slice(0),u=i.slice(0);r=[],i=[],e++,s&&t.batch.start(),t.each(o,function(e){t.trigger.apply(t,e)}),t.each(u,function(t){t()})}},trigger:function(i,a,s){if(!i._init){if(0===n)return t.trigger(i,a,s);a="string"==typeof a?{type:a}:a,a.batchNum=e,r.push([i,a,s])}}}}(__m5),__m9=function(t){var e=function(e,n,r){t.listenTo.call(r,e,"change",function(){var i=t.makeArray(arguments),a=i.shift();i[0]=("*"===n?[r.indexOf(e),i[0]]:[n,i[0]]).join("."),a.triggeredNS=a.triggeredNS||{},a.triggeredNS[r._cid]||(a.triggeredNS[r._cid]=!0,t.trigger(r,a,i))})},n=function(e,n){return n?[e]:t.isArray(e)?e:(""+e).split(".")},r=function(t){return function(){var n=this;this._each(function(r,i){r&&r.bind&&e(r,t||i,n)})}},i=null,a=function(){for(var t in i)i[t].added&&delete i[t].obj._cid;i=null},s=function(t){return i&&i[t._cid]&&i[t._cid].instance},o=t.Map=t.Construct.extend({setup:function(){if(t.Construct.setup.apply(this,arguments),t.Map){this.defaults||(this.defaults={}),this._computes=[];for(var e in this.prototype)"function"!=typeof this.prototype[e]?this.defaults[e]=this.prototype[e]:this.prototype[e].isComputed&&this._computes.push(e)}!t.List||this.prototype instanceof t.List||(this.List=o.List({Map:this},{}))},_computes:[],bind:t.bindAndSetup,on:t.bindAndSetup,unbind:t.unbindAndTeardown,off:t.unbindAndTeardown,id:"id",helpers:{addToMap:function(e,n){var r;i||(r=a,i={});var s=e._cid,o=t.cid(e);return i[o]||(i[o]={obj:e,instance:n,added:!s}),r},canMakeObserve:function(e){return e&&!t.isDeferred(e)&&(t.isArray(e)||t.isPlainObject(e)||e instanceof t.Map)},unhookup:function(e,n){return t.each(e,function(e){e&&e.unbind&&t.stopListening.call(n,e,"change")})},hookupBubble:function(n,r,i,a,u){return a=a||o,u=u||t.List,n instanceof o?i._bindings&&o.helpers.unhookup([n],i):n=t.isArray(n)?s(n)||new u(n):s(n)||new a(n),i._bindings&&e(n,r,i),n},serialize:function(e,n,r){return e.each(function(i,a){r[a]=o.helpers.canMakeObserve(i)&&t.isFunction(i[n])?i[n]():i,t.__reading&&t.__reading(e,a)}),t.__reading&&t.__reading(e,"__keys"),r},makeBindSetup:r},keys:function(e){var n=[];t.__reading&&t.__reading(e,"__keys");for(var r in e._data)n.push(r);return n}},{setup:function(e){this._data={},t.cid(this,".map"),this._init=1,this._setupComputes();var n=e&&t.Map.helpers.addToMap(e,this),r=t.extend(t.extend(!0,{},this.constructor.defaults||{}),e);this.attr(r),n&&n(),this.bind("change",t.proxy(this._changes,this)),delete this._init},_setupComputes:function(){var t=this.constructor._computes;this._computedBindings={};for(var e,n=0,r=t.length;r>n;n++)e=t[n],this[e]=this[e].clone(this),this._computedBindings[e]={count:0}},_bindsetup:r(),_bindteardown:function(){var t=this;this._each(function(e){o.helpers.unhookup([e],t)})},_changes:function(e,n,r,i,a){t.batch.trigger(this,{type:n,batchNum:e.batchNum},[i,a])},_triggerChange:function(){t.batch.trigger(this,"change",t.makeArray(arguments))},_each:function(t){var e=this.__get();for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},attr:function(e,n){var r=typeof e;return"string"!==r&&"number"!==r?this._attrs(e,n):1===arguments.length?(t.__reading&&t.__reading(this,e),this._get(e)):(this._set(e,n),this)},each:function(){return t.__reading&&t.__reading(this,"__keys"),t.each.apply(undefined,[this.__get()].concat(t.makeArray(arguments)))},removeAttr:function(e){var r=t.List&&this instanceof t.List,i=n(e),a=i.shift(),s=r?this[a]:this._data[a];return i.length&&s?s.removeAttr(i):(~e.indexOf(".")&&(a=e),r?this.splice(a,1):a in this._data&&(delete this._data[a],a in this.constructor.prototype||delete this[a],t.batch.trigger(this,"__keys"),this._triggerChange(a,"remove",undefined,s)),s)},_get:function(t){var e;if("string"==typeof t&&~t.indexOf(".")&&(e=this.__get(t),e!==undefined))return e;var r=n(t),i=this.__get(r.shift());return r.length?i?i._get(r):undefined:i},__get:function(e){return e?this[e]&&this[e].isComputed&&t.isFunction(this.constructor.prototype[e])?this[e]():this._data[e]:this._data},_set:function(t,e,r){var i=n(t,r),a=i.shift(),s=this.__get(a);if(i.length&&o.helpers.canMakeObserve(s))s._set(i,e);else{if(i.length)throw"can.Map: Object does not exist";this.__convert&&(e=this.__convert(a,e)),this.__set(a,e,s)}},__set:function(e,n,r){if(n!==r){var i=this.__get().hasOwnProperty(e)?"set":"add";this.___set(e,o.helpers.canMakeObserve(n)?o.helpers.hookupBubble(n,e,this):n),"add"===i&&t.batch.trigger(this,"__keys",undefined),this._triggerChange(e,i,n,r),r&&o.helpers.unhookup([r],this)}},___set:function(e,n){this[e]&&this[e].isComputed&&t.isFunction(this.constructor.prototype[e])&&this[e](n),this._data[e]=n,t.isFunction(this.constructor.prototype[e])||(this[e]=n)},bind:function(e){var n=this._computedBindings&&this._computedBindings[e];if(n)if(n.count)n.count++;else{n.count=1;var r=this;n.handler=function(n,i,a){t.batch.trigger(r,{type:e,batchNum:n.batchNum},[i,a])},this[e].bind("change",n.handler)}return t.bindAndSetup.apply(this,arguments)},unbind:function(e){var n=this._computedBindings&&this._computedBindings[e];return n&&(1===n.count?(n.count=0,this[e].unbind("change",n.handler),delete n.handler):n.count++),t.unbindAndTeardown.apply(this,arguments)},serialize:function(){return t.Map.helpers.serialize(this,"serialize",{})},_attrs:function(e,n){var r,i=this;if(e===undefined)return o.helpers.serialize(this,"attr",{});e=t.simpleExtend({},e),t.batch.start(),this.each(function(a,s){if("_cid"!==s){if(r=e[s],r===undefined)return n&&i.removeAttr(s),undefined;i.__convert&&(r=i.__convert(s,r)),r instanceof t.Map?i.__set(s,r,a):o.helpers.canMakeObserve(a)&&o.helpers.canMakeObserve(r)&&a.attr?a.attr(r,n):a!==r&&i.__set(s,r,a),delete e[s]}});for(var a in e)"_cid"!==a&&(r=e[a],this._set(a,r,!0));return t.batch.stop(),this},compute:function(e){if(t.isFunction(this.constructor.prototype[e]))return t.compute(this[e],this);var n=e.split("."),r=n.length-1,i={args:[]};return t.compute(function(e){return arguments.length?(t.compute.read(this,n.slice(0,r)).value.attr(n[r],e),undefined):t.compute.read(this,n,i).value},this)}});return o.prototype.on=o.prototype.bind,o.prototype.off=o.prototype.unbind,o}(__m3,__m10,__m1,__m11),__m12=function(t,e){var n=[].splice,r=function(){var t={0:"a",length:1};return n.call(t,0,1),!t[0]}(),i=e({Map:e},{setup:function(e,n){this.length=0,t.cid(this,".map"),this._init=1,e=e||[];var r;t.isDeferred(e)?this.replace(e):(r=e.length&&t.Map.helpers.addToMap(e,this),this.push.apply(this,t.makeArray(e||[]))),r&&r(),this.bind("change",t.proxy(this._changes,this)),t.simpleExtend(this,n),delete this._init},_triggerChange:function(n,r,i,a){e.prototype._triggerChange.apply(this,arguments),~n.indexOf(".")||("add"===r?(t.batch.trigger(this,r,[i,+n]),t.batch.trigger(this,"length",[this.length])):"remove"===r?(t.batch.trigger(this,r,[a,+n]),t.batch.trigger(this,"length",[this.length])):t.batch.trigger(this,r,[i,+n]))},__get:function(t){return t?this[t]:this},___set:function(t,e){this[t]=e,+t>=this.length&&(this.length=+t+1)},_each:function(t){for(var e=this.__get(),n=0;e.length>n;n++)t(e[n],n)},_bindsetup:e.helpers.makeBindSetup("*"),serialize:function(){return e.helpers.serialize(this,"serialize",[])},splice:function(i,a){var s,o=t.makeArray(arguments);for(s=2;o.length>s;s++){var u=o[s];e.helpers.canMakeObserve(u)&&(o[s]=e.helpers.hookupBubble(u,"*",this,this.constructor.Map,this.constructor))}a===undefined&&(a=o[1]=this.length-i);var c=n.apply(this,o);if(!r)for(s=this.length;c.length+this.length>s;s++)delete this[s];return t.batch.start(),a>0&&(this._triggerChange(""+i,"remove",undefined,c),e.helpers.unhookup(c,this)),o.length>2&&this._triggerChange(""+i,"add",o.slice(2),c),t.batch.stop(),c},_attrs:function(n,r){return n===undefined?e.helpers.serialize(this,"attr",[]):(n=t.makeArray(n),t.batch.start(),this._updateAttrs(n,r),t.batch.stop(),undefined)},_updateAttrs:function(t,n){for(var r=Math.min(t.length,this.length),i=0;r>i;i++){var a=this[i],s=t[i];e.helpers.canMakeObserve(a)&&e.helpers.canMakeObserve(s)?a.attr(s,n):a!==s&&this._set(i,s)}t.length>this.length?this.push.apply(this,t.slice(this.length)):t.length<this.length&&n&&this.splice(t.length)}}),a=function(e){return e[0]&&t.isArray(e[0])?e[0]:t.makeArray(e)};return t.each({push:"length",unshift:0},function(t,n){var r=[][n];i.prototype[n]=function(){for(var n,i,a=[],s=t?this.length:0,o=arguments.length;o--;)i=arguments[o],a[o]=e.helpers.canMakeObserve(i)?e.helpers.hookupBubble(i,"*",this,this.constructor.Map,this.constructor):i;return n=r.apply(this,a),(!this.comparator||a.length)&&this._triggerChange(""+s,"add",a,undefined),n}}),t.each({pop:"length",shift:0},function(e,n){i.prototype[n]=function(){var r=a(arguments),i=e&&this.length?this.length-1:0,s=[][n].apply(this,r);return this._triggerChange(""+i,"remove",undefined,[s]),s&&s.unbind&&t.stopListening.call(this,s,"change"),s}}),t.extend(i.prototype,{indexOf:function(e,n){return this.attr("length"),t.inArray(e,this,n)},join:function(){return[].join.apply(this.attr(),arguments)},reverse:[].reverse,slice:function(){var t=Array.prototype.slice.apply(this,arguments);return new this.constructor(t)},concat:function(){var e=[];return t.each(t.makeArray(arguments),function(n,r){e[r]=n instanceof t.List?n.serialize():n}),new this.constructor(Array.prototype.concat.apply(this.serialize(),e))},forEach:function(e,n){return t.each(this,e,n||this)},replace:function(e){return t.isDeferred(e)?e.then(t.proxy(this.replace,this)):this.splice.apply(this,[0,this.length].concat(t.makeArray(e||[]))),this}}),t.List=e.List=i,t.List}(__m3,__m9),__m13=function(t){var e=["__reading","__clearReading","__setReading"],n=function(n){for(var r={},i=0;e.length>i;i++)r[e[i]]=t[e[i]];return t.__reading=function(t,e){n.push({obj:t,attr:e+""})},t.__clearReading=function(){return n.splice(0,n.length)},t.__setReading=function(t){[].splice.apply(n,[0,n.length].concat(t))},r},r=function(){},i=function(e,r){var i=[],a=n(i),s=e.call(r);return t.simpleExtend(t,a),{value:s,observed:i}},a=function(e,n,r,a){var s,o={},u=!0,c={value:undefined,teardown:function(){for(var t in o){var e=o[t];e.observe.obj.unbind(e.observe.attr,h),delete o[t]}}},h=function(t){if(!(a&&!a.bound||t.batchNum!==undefined&&t.batchNum===s)){var e=c.value,n=l();c.value=n,n!==e&&r(n,e),s=s=t.batchNum}},l=function(){var t,r=i(e,n),a=r.observed,s=r.value;u=!u;for(var c=0,l=a.length;l>c;c++)t=a[c],o[t.obj._cid+"|"+t.attr]?o[t.obj._cid+"|"+t.attr].matched=u:(o[t.obj._cid+"|"+t.attr]={matched:u,observe:t},t.obj.bind(t.attr,h));for(var p in o)t=o[p],t.matched!==u&&(t.observe.obj.unbind(t.observe.attr,h),delete o[p]);return s};return c.value=l(),c.isListening=!t.isEmptyObject(o),c},s=function(e){return e instanceof t.Map||e&&e.__get};t.compute=function(e,n,s){if(e&&e.isComputed)return e;var o,u,c,h,l={bound:!1,hasDependencies:!1},p=r,f=r,d=function(){return c},g=function(t){c=t},m=!0,_=t.makeArray(arguments),v=function(e,n){c=e,t.batch.trigger(u,"change",[e,n])};if(u=function(e){if(arguments.length){var r=c,i=g.call(n,e,r);return u.hasDependencies?d.call(n):(c=i===undefined?d.call(n):i,r!==c&&t.batch.trigger(u,"change",[c,r]),c)}return t.__reading&&m&&(t.__reading(u,"change"),l.bound||t.compute.temporarilyBind(u)),l.bound?c:d.call(n)},"function"==typeof e)g=e,d=e,m=s===!1?!1:!0,u.hasDependencies=!1,p=function(t){o=a(e,n||this,t,l),u.hasDependencies=o.isListening,c=o.value},f=function(){o&&o.teardown()};else if(n)if("string"==typeof n){var b=n,y=e instanceof t.Map;y&&(u.hasDependencies=!0),d=function(){return y?e.attr(b):e[b]},g=function(t){y?e.attr(b,t):e[b]=t};var w;p=function(n){w=function(){n(d(),c)},t.bind.call(e,s||b,w),c=i(d).value},f=function(){t.unbind.call(e,s||b,w)}}else if("function"==typeof n)c=e,g=n,n=s,h="setter";else{c=e;var x=n,k=v;v=function(){var t=d.call(n);t!==c&&k(t,c)},d=x.get||d,g=x.set||g,p=x.on||p,f=x.off||f}else c=e;return t.cid(u,"compute"),t.simpleExtend(u,{isComputed:!0,_bindsetup:function(){l.bound=!0;var e=t.__reading;delete t.__reading,p.call(this,v),t.__reading=e},_bindteardown:function(){f.call(this,v),l.bound=!1},bind:t.bindAndSetup,unbind:t.unbindAndTeardown,clone:function(e){return e&&("setter"===h?_[2]=e:_[1]=e),t.compute.apply(t,_)}})};var o,u=function(){for(var t=0,e=o.length;e>t;t++)o[t].unbind("change",r);o=null};return t.compute.temporarilyBind=function(t){t.bind("change",r),o||(o=[],setTimeout(u,10)),o.push(t)},t.compute.binder=a,t.compute.truthy=function(e){return t.compute(function(){var t=e();return"function"==typeof t&&(t=t()),!!t})},t.compute.read=function(e,n,r){r=r||{};for(var i,a,o,u=e,c=0,h=n.length;h>c;c++)if(a=u,a&&a.isComputed&&(r.foundObservable&&r.foundObservable(a,c),a=a()),s(a)?(!o&&r.foundObservable&&r.foundObservable(a,c),o=1,u="function"==typeof a[n[c]]&&a.constructor.prototype[n[c]]===a[n[c]]?r.returnObserveMethods?u[n[c]]:"constructor"===n[c]&&a instanceof t.Construct?a[n[c]]:a[n[c]].apply(a,r.args||[]):u.attr(n[c])):u=a[n[c]],u&&u.isComputed&&!r.isArgument&&h-1>c&&(!o&&r.foundObservable&&r.foundObservable(a,c+1),u=u()),i=typeof u,n.length-1>c&&(null===u||"function"!==i&&"object"!==i))return r.earlyExit&&r.earlyExit(a,c,u),{value:undefined,parent:a};return"function"==typeof u&&(r.isArgument?u.isComputed||r.proxyMethods===!1||(u=t.proxy(u,a)):(u.isComputed&&!o&&r.foundObservable&&r.foundObservable(u,c),u=u.call(a))),u===undefined&&r.earlyExit&&r.earlyExit(a,c-1),{value:u,parent:a}},t.compute}(__m3,__m10,__m11),__m14=function(t){var e=function(e,n,r){var i=new t.Deferred;return e.then(function(){var e=t.makeArray(arguments),a=!0;try{e[0]=n[r](e[0])}catch(s){a=!1,i.rejectWith(i,[s].concat(e))}a&&i.resolveWith(i,e)},function(){i.rejectWith(this,arguments)}),"function"==typeof e.abort&&(i.abort=function(){return e.abort()}),i},n=0,r=function(e){return t.__reading&&t.__reading(e,e.constructor.id),e.__get(e.constructor.id)},i=function(e,n,r,i,a,s){var o={};if("string"==typeof e){var u=e.split(/\s+/);o.url=u.pop(),u.length&&(o.type=u.pop())}else t.extend(o,e);return o.data="object"!=typeof n||t.isArray(n)?n:t.extend(o.data||{},n),o.url=t.sub(o.url,o.data,!0),t.ajax(t.extend({type:r||"post",dataType:i||"json",success:a,error:s},o))},a=function(e,n,i,a,s){var o;t.isArray(e)?(o=e[1],e=e[0]):o=e.serialize(),o=[o];var u,c,h=e.constructor;return"create"!==n&&o.unshift(r(e)),c=h[n].apply(h,o),u=c.pipe(function(t){return e[s||n+"d"](t,c),e}),c.abort&&(u.abort=function(){c.abort()}),u.then(i,a),u},s={models:function(e){return function(n,r){if(t.Model._reqs++,n){if(n instanceof this.List)return n;var i=this,a=[],s=i.List||c,o=r instanceof t.List?r:new s,u=t.isArray(n),h=n instanceof c,l=u?n:h?n.serialize():t.getObject(e||"data",n);if(l===undefined)throw Error("Could not get any raw data while converting using .models");return o.length&&o.splice(0),t.each(l,function(t){a.push(i.model(t))}),o.push.apply(o,a),u||t.each(n,function(t,e){"data"!==e&&o.attr(e,t)}),setTimeout(t.proxy(this._clean,this),1),o}}},model:function(e){return function(n){if(n){"function"==typeof n.serialize&&(n=n.serialize()),e&&(n=t.getObject(e||"data",n));var r=n[this.id],i=(r||0===r)&&this.store[r]?this.store[r].attr(n,this.removeAttr||!1):new this(n);return i}}}},o={create:{url:"_shortName",type:"post"},update:{data:function(e,n){n=n||{};var r=this.id;return n[r]&&n[r]!==e&&(n["new"+t.capitalize(e)]=n[r],delete n[r]),n[r]=e,n},type:"put"},destroy:{type:"delete",data:function(t,e){return e=e||{},e.id=e[this.id]=t,e}},findAll:{url:"_shortName"},findOne:{}},u=function(t,e){return function(n){return n=t.data?t.data.apply(this,arguments):n,i(e||this[t.url||"_url"],n,t.type||"get")}};t.Model=t.Map({fullName:"can.Model",_reqs:0,setup:function(e){if(this.store={},t.Map.setup.apply(this,arguments),t.Model){this.List=c({Map:this},{});var r=this,i=t.proxy(this._clean,r);t.each(o,function(n,a){if(t.isFunction(r[a])||(r[a]=u(n,r[a])),r["make"+t.capitalize(a)]){var s=r["make"+t.capitalize(a)](r[a]);t.Construct._overwrite(r,e,a,function(){t.Model._reqs++;var e=s.apply(this,arguments),n=e.then(i,i);return n.abort=e.abort,n})}}),t.each(s,function(n,i){"string"==typeof r[i]&&t.Construct._overwrite(r,e,i,n(r[i]))}),"can.Model"!==r.fullName&&r.fullName||(n++,r.fullName="Model"+n),t.Model._reqs=0,this._url=this._shortName+"/{"+this.id+"}"}},_ajax:u,_makeRequest:a,_clean:function(){if(t.Model._reqs--,!t.Model._reqs)for(var e in this.store)this.store[e]._bindings||delete this.store[e];return arguments[0]},models:s.models("data"),model:s.model()},{setup:function(e){var n=e&&e[this.constructor.id];t.Model._reqs&&null!==n&&(this.constructor.store[n]=this),t.Map.prototype.setup.apply(this,arguments)},isNew:function(){var t=r(this);return!(t||0===t)},save:function(t,e){return a(this,this.isNew()?"create":"update",t,e)},destroy:function(e,n){if(this.isNew()){var r=this,i=t.Deferred();return i.then(e,n),i.done(function(t){r.destroyed(t)}).resolve(r)}return a(this,"destroy",e,n,"destroyed")},_bindsetup:function(){return this.constructor.store[this.__get(this.constructor.id)]=this,t.Map.prototype._bindsetup.apply(this,arguments)},_bindteardown:function(){return delete this.constructor.store[r(this)],t.Map.prototype._bindteardown.apply(this,arguments)},___set:function(e,n){t.Map.prototype.___set.call(this,e,n),e===this.constructor.id&&this._bindings&&(this.constructor.store[r(this)]=this)}}),t.each({makeFindAll:"models",makeFindOne:"model",makeCreate:"model",makeUpdate:"model"},function(n,r){t.Model[r]=function(r){return function(){var i=t.makeArray(arguments),a=t.isFunction(i[1])?i.splice(0,1):i.splice(0,2),s=e(r.apply(this,a),this,n);return s.then(i[0],i[1]),s}}}),t.each(["created","updated","destroyed"],function(e){t.Model.prototype[e]=function(n){var r,i=this.constructor;r=n&&"object"==typeof n&&this.attr(n.attr?n.attr():n),t.trigger(this,"change",e),t.trigger(i,e,this)}});var c=t.Model.List=t.List({setup:function(e){t.isPlainObject(e)&&!t.isArray(e)?(t.List.prototype.setup.apply(this),this.replace(this.constructor.Map.findAll(e))):t.List.prototype.setup.apply(this,arguments)},_changes:function(e,n){if(t.List.prototype._changes.apply(this,arguments),/\w+\.destroyed/.test(n)){var r=this.indexOf(e.target);-1!==r&&this.splice(r,1)}}});return t.Model}(__m3,__m9,__m12),__m15=function(t){var e=t.isFunction,n=t.makeArray,r=1,i=t.view=t.template=function(n,r,a,s){e(a)&&(s=a,a=undefined);var o=function(t){return i.frag(t)},u=e(s)?function(t){s(o(t))}:null,c=e(n)?n(r,a,u):i.render(n,r,a,u),h=t.Deferred();return e(c)?c:t.isDeferred(c)?(c.then(function(t,e){h.resolve.call(h,o(t),e)},function(){h.fail.apply(h,arguments)}),h):o(c)};t.extend(i,{frag:function(t,e){return i.hookup(i.fragment(t),e)},fragment:function(e){var n=t.buildFragment(e,document.body);return n.childNodes.length||n.appendChild(document.createTextNode("")),n},toId:function(e){return t.map((""+e).split(/\/|\./g),function(t){return t?t:undefined}).join("_")},hookup:function(e,n){var r,a,s=[];return t.each(e.childNodes?t.makeArray(e.childNodes):e,function(e){1===e.nodeType&&(s.push(e),s.push.apply(s,t.makeArray(e.getElementsByTagName("*"))))}),t.each(s,function(t){t.getAttribute&&(r=t.getAttribute("data-view-id"))&&(a=i.hookups[r])&&(a(t,n,r),delete i.hookups[r],t.removeAttribute("data-view-id"))}),e},hookups:{},hook:function(t){return i.hookups[++r]=t," data-view-id='"+r+"'"},cached:{},cachedRenderers:{},cache:!0,register:function(t){this.types["."+t.suffix]=t},types:{},ext:".ejs",registerScript:function(){},preload:function(){},render:function(r,a,c,h){e(c)&&(h=c,c=undefined);var l,p,f,d,g,m=o(a);if(m.length)return p=new t.Deferred,f=t.extend({},a),m.push(s(r,!0)),t.when.apply(t,m).then(function(e){var r,i=n(arguments),s=i.pop();if(t.isDeferred(a))f=u(e);else for(var o in a)t.isDeferred(a[o])&&(f[o]=u(i.shift()));r=s(f,c),p.resolve(r,f),h&&h(r,f)},function(){p.reject.apply(p,arguments)}),p;if(t.__reading&&(l=t.__reading,t.__reading=null),d=e(h),p=s(r,d),t.Map&&l&&(t.__reading=l),d)g=p,p.then(function(t){h(a?t(a,c):t)});else{if("resolved"===p.state()&&p.__view_id){var _=i.cachedRenderers[p.__view_id];return a?_(a,c):_}p.then(function(t){g=a?t(a,c):t})}return g},registerView:function(e,n,r,a){var s=(r||i.types[i.ext]).renderer(e,n);return a=a||new t.Deferred,i.cache&&(i.cached[e]=a,a.__view_id=e,i.cachedRenderers[e]=s),a.resolve(s)}});var a=function(t,e){if(!t.length)throw"can.view: No template or empty template:"+e},s=function(e,n){var r,s,o,u="string"==typeof e?e:e.url,c=e.engine||u.match(/\.[\w\d]+$/);if(u.match(/^#/)&&(u=u.substr(1)),(s=document.getElementById(u))&&(c="."+s.type.match(/\/(x\-)?(.+)/)[2]),c||i.cached[u]||(u+=c=i.ext),t.isArray(c)&&(c=c[0]),o=i.toId(u),u.match(/^\/\//)&&(u=u.substr(2),u=window.steal?steal.config().root.mapJoin(""+steal.id(u)):u),window.require&&require.toUrl&&(u=require.toUrl(u)),r=i.types[c],i.cached[o])return i.cached[o];if(s)return i.registerView(o,s.innerHTML,r);var h=new t.Deferred;return t.ajax({async:n,url:u,dataType:"text",error:function(t){a("",u),h.reject(t)},success:function(t){a(t,u),i.registerView(o,t,r,h)}}),h},o=function(e){var n=[];if(t.isDeferred(e))return[e];for(var r in e)t.isDeferred(e[r])&&n.push(e[r]);return n},u=function(e){return t.isArray(e)&&"success"===e[1]?e[0]:e};return t.extend(i,{register:function(t){this.types["."+t.suffix]=t,i[t.suffix]=function(e,n){if(!n){var r=function(){return i.frag(r.render.apply(this,arguments))};return r.render=function(){var n=t.renderer(null,e);return n.apply(n,arguments)},r}return i.preload(e,t.renderer(e,n))}},registerScript:function(t,e,n){return"can.view.preload('"+e+"',"+i.types["."+t].script(e,n)+");"},preload:function(e,n){function r(){return i.frag(n.apply(this,arguments))}var a=i.cached[e]=(new t.Deferred).resolve(function(t,e){return n.call(t,t,e)});return r.render=n,a.__view_id=e,i.cachedRenderers[e]=n,r}}),t}(__m3),__m16=function(t){var e,n=function(e,n,r){return t.bind.call(e,n,r),function(){t.unbind.call(e,n,r)}},r=t.isFunction,i=t.extend,a=t.each,s=[].slice,o=/\{([^\}]+)\}/g,u=t.getObject("$.event.special",[t])||{},c=function(e,n,r,i){return t.delegate.call(e,n,r,i),function(){t.undelegate.call(e,n,r,i)}},h=function(e,r,i,a){return a?c(e,t.trim(a),r,i):n(e,r,i)},l=t.Control=t.Construct({setup:function(){if(t.Construct.setup.apply(this,arguments),t.Control){var e,n=this;n.actions={};for(e in n.prototype)n._isAction(e)&&(n.actions[e]=n._action(e))}},_shifter:function(e,n){var i="string"==typeof n?e[n]:n;return r(i)||(i=e[i]),function(){return e.called=n,i.apply(e,[this.nodeName?t.$(this):this].concat(s.call(arguments,0)))}},_isAction:function(t){var e=this.prototype[t],n=typeof e;return"constructor"!==t&&("function"===n||"string"===n&&r(this.prototype[e]))&&!!(u[t]||p[t]||/[^\w]/.test(t))},_action:function(n,r){if(o.lastIndex=0,r||!o.test(n)){var i=r?t.sub(n,this._lookup(r)):n;if(!i)return null;var a=t.isArray(i),s=a?i[1]:i,u=s.split(/\s+/g),c=u.pop();return{processor:p[c]||e,parts:[s,u.join(" "),c],delegate:a?i[0]:undefined}}},_lookup:function(t){return[t,window]},processors:{},defaults:{}},{setup:function(e,n){var r,a=this.constructor,s=a.pluginName||a._fullName;return this.element=t.$(e),s&&"can_control"!==s&&this.element.addClass(s),r=t.data(this.element,"controls"),r||(r=[],t.data(this.element,"controls",r)),r.push(this),this.options=i({},a.defaults,n),this.on(),[this.element,this.options]},on:function(e,n,r,i){if(!e){this.off();var a,s,o=this.constructor,u=this._bindings,c=o.actions,l=this.element,p=t.Control._shifter(this,"destroy");for(a in c)c.hasOwnProperty(a)&&(s=c[a]||o._action(a,this.options))&&u.push(s.processor(s.delegate||l,s.parts[2],s.parts[1],a,this));return t.bind.call(l,"removed",p),u.push(function(e){t.unbind.call(e,"removed",p)}),u.length}return"string"==typeof e&&(i=r,r=n,n=e,e=this.element),i===undefined&&(i=r,r=n,n=null),"string"==typeof i&&(i=t.Control._shifter(this,i)),this._bindings.push(h(e,r,i,n)),this._bindings.length},off:function(){var t=this.element[0];a(this._bindings||[],function(e){e(t)}),this._bindings=[]},destroy:function(){if(null!==this.element){var e,n=this.constructor,r=n.pluginName||n._fullName;
    this.off(),r&&"can_control"!==r&&this.element.removeClass(r),e=t.data(this.element,"controls"),e.splice(t.inArray(this,e),1),t.trigger(this,"destroyed"),this.element=null}}}),p=t.Control.processors;return e=function(e,n,r,i,a){return h(e,n,t.Control._shifter(a,i),r)},a(["change","click","contextmenu","dblclick","keydown","keyup","keypress","mousedown","mousemove","mouseout","mouseover","mouseup","reset","resize","scroll","select","submit","focusin","focusout","mouseenter","mouseleave","touchstart","touchmove","touchcancel","touchend","touchleave"],function(t){p[t]=e}),l}(__m3,__m1),__m18=function(t){var e=/^\d+$/,n=/([^\[\]]+)|(\[\])/g,r=/([^?#]*)(#.*)?$/,i=function(t){return decodeURIComponent(t.replace(/\+/g," "))};return t.extend(t,{deparam:function(a){var s,o,u={};return a&&r.test(a)&&(s=a.split("&"),t.each(s,function(t){var r=t.split("="),a=i(r.shift()),s=i(r.join("=")),c=u;if(a){r=a.match(n);for(var h=0,l=r.length-1;l>h;h++)c[r[h]]||(c[r[h]]=e.test(r[h+1])||"[]"===r[h+1]?[]:{}),c=c[r[h]];o=r.pop(),"[]"===o?c.push(s):c[o]=s}})),u}}),t}(__m3,__m2),__m17=function(t){var e,n,r,i,a=/\:([\w\.]+)/g,s=/^(?:&[^=]+=[^&]*)+/,o=function(e){var n=[];return t.each(e,function(e,r){n.push(("className"===r?"class":r)+'="'+("href"===r?e:t.esc(e))+'"')}),n.join(" ")},u=function(t,e){var n=0,r=0,i={};for(var a in t.defaults)t.defaults[a]===e[a]&&(i[a]=1,n++);for(;t.names.length>r;r++){if(!e.hasOwnProperty(t.names[r]))return-1;i[t.names[r]]||n++}return n},c=window.location,h=function(t){return(t+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},l=t.each,p=t.extend,f=function(e){return e&&"object"==typeof e?(e=e instanceof t.Map?e.attr():t.isFunction(e.slice)?e.slice():t.extend({},e),t.each(e,function(t,n){e[n]=f(t)})):e!==undefined&&null!==e&&t.isFunction(e.toString)&&(e=""+e),e},d=function(t){return t.replace(/\\/g,"")},g=function(){i=1,clearTimeout(e),e=setTimeout(function(){i=0;var e=t.route.data.serialize(),n=t.route.param(e,!0);t.route._call("setURL",n),r=n},10)};t.route=function(e,n){var r=t.route._call("root");r.lastIndexOf("/")===r.length-1&&0===e.indexOf("/")&&(e=e.substr(1)),n=n||{};for(var i,s,o=[],u="",c=a.lastIndex=0,l=t.route._call("querySeparator");i=a.exec(e);)o.push(i[1]),u+=d(e.substring(c,a.lastIndex-i[0].length)),s="\\"+(d(e.substr(a.lastIndex,1))||l),u+="([^"+s+"]"+(n[i[1]]?"*":"+")+")",c=a.lastIndex;return u+=e.substr(c).replace("\\",""),t.route.routes[e]={test:RegExp("^"+u+"($|"+h(l)+")"),route:e,names:o,defaults:n,length:e.split("/").length},t.route},p(t.route,{param:function(e,n){var r,i,s=0,o=e.route,c=0;if(delete e.route,l(e,function(){c++}),l(t.route.routes,function(t){return i=u(t,e),i>s&&(r=t,s=i),i>=c?!1:undefined}),t.route.routes[o]&&u(t.route.routes[o],e)===s&&(r=t.route.routes[o]),r){var h,f=p({},e),d=r.route.replace(a,function(t,n){return delete f[n],e[n]===r.defaults[n]?"":encodeURIComponent(e[n])}).replace("\\","");return l(r.defaults,function(t,e){f[e]===t&&delete f[e]}),h=t.param(f),n&&t.route.attr("route",r.route),d+(h?t.route._call("querySeparator")+h:"")}return t.isEmptyObject(e)?"":t.route._call("querySeparator")+t.param(e)},deparam:function(e){var n=t.route._call("root");n.lastIndexOf("/")===n.length-1&&0===e.indexOf("/")&&(e=e.substr(1));var r={length:-1},i=t.route._call("querySeparator"),a=t.route._call("paramsMatcher");if(l(t.route.routes,function(t){t.test.test(e)&&t.length>r.length&&(r=t)}),r.length>-1){var s=e.match(r.test),o=s.shift(),u=e.substr(o.length-(s[s.length-1]===i?1:0)),c=u&&a.test(u)?t.deparam(u.slice(1)):{};return c=p(!0,{},r.defaults,c),l(s,function(t,e){t&&t!==i&&(c[r.names[e]]=decodeURIComponent(t))}),c.route=r.route,c}return e.charAt(0)!==i&&(e=i+e),a.test(e)?t.deparam(e.slice(1)):{}},data:new t.Map({}),routes:{},ready:function(e){return e!==!0&&(t.route._setup(),t.route.setState()),t.route},url:function(e,n){return n&&(e=t.extend({},t.route.deparam(t.route._call("matchingPartOfURL")),e)),t.route._call("root")+t.route.param(e)},link:function(e,n,r,i){return"<a "+o(p({href:t.route.url(n,i)},r))+">"+e+"</a>"},current:function(e){return this._call("matchingPartOfURL")===t.route.param(e)},bindings:{hashchange:{paramsMatcher:s,querySeparator:"&",bind:function(){t.bind.call(window,"hashchange",m)},unbind:function(){t.unbind.call(window,"hashchange",m)},matchingPartOfURL:function(){return c.href.split(/#!?/)[1]||""},setURL:function(t){return c.hash="#!"+t,t},root:"#!"}},defaultBinding:"hashchange",currentBinding:null,_setup:function(){t.route.currentBinding||(t.route._call("bind"),t.route.bind("change",g),t.route.currentBinding=t.route.defaultBinding)},_teardown:function(){t.route.currentBinding&&(t.route._call("unbind"),t.route.unbind("change",g),t.route.currentBinding=null),clearTimeout(e),i=0},_call:function(){var e=t.makeArray(arguments),n=e.shift(),r=t.route.bindings[t.route.currentBinding||t.route.defaultBinding],i=r[n];return i.apply?i.apply(r,e):i}}),l(["bind","unbind","on","off","delegate","undelegate","removeAttr","compute","_get","__get"],function(e){t.route[e]=function(){return t.route.data[e]?t.route.data[e].apply(t.route.data,arguments):undefined}}),t.route.attr=function(e,n){var r,i=typeof e;return r=n===undefined?arguments:"string"!==i&&"number"!==i?[f(e),n]:[e,f(n)],t.route.data.attr.apply(t.route.data,r)};var m=t.route.setState=function(){var e=t.route._call("matchingPartOfURL");n=t.route.deparam(e),i&&e===r||t.route.attr(n,!0)};return t.route}(__m3,__m9,__m12,__m18),__m19=function(t){return t.Control.processors.route=function(e,n,r,i,a){r=r||"",t.route.routes[r]||("/"===r[0]&&(r=r.substring(1)),t.route(r));var s,o=function(e){if(t.route.attr("route")===r&&(e.batchNum===undefined||e.batchNum!==s)){s=e.batchNum;var n=t.route.attr();delete n.route,t.isFunction(a[i])?a[i](n):a[a[i]](n)}};return t.route.bind("change",o),function(){t.route.unbind("change",o)}},t}(__m3,__m17,__m16),__m22=function(t){var e={tagToContentPropMap:{option:"textContent"in document.createElement("option")?"textContent":"innerText",textarea:"value"},attrMap:{"class":"className",value:"value",innerText:"innerText",textContent:"textContent",checked:!0,disabled:!0,readonly:!0,required:!0,src:function(t,e){null===e||""===e?t.removeAttribute("src"):t.setAttribute("src",e)}},attrReg:/([^\s=]+)[\s]*=[\s]*/,defaultValue:["input","textarea"],tagMap:{"":"span",table:"tbody",tr:"td",ol:"li",ul:"li",tbody:"tr",thead:"tr",tfoot:"tr",select:"option",optgroup:"option"},reverseTagMap:{tr:"tbody",option:"select",td:"tr",th:"tr",li:"ul"},getParentNode:function(t,e){return e&&11===t.parentNode.nodeType?e:t.parentNode},setAttr:function(n,r,i){var a=(""+n.nodeName).toLowerCase(),s=e.attrMap[r];"function"==typeof s?s(n,i):s===!0&&"checked"===r&&"radio"===n.type?(t.inArray(a,e.defaultValue)>=0&&(n.defaultChecked=!0),n[r]=!0):s===!0?n[r]=!0:s?(n[s]=i,"value"===s&&t.inArray(a,e.defaultValue)>=0&&(n.defaultValue=i)):n.setAttribute(r,i)},getAttr:function(t,n){return(e.attrMap[n]&&t[e.attrMap[n]]?t[e.attrMap[n]]:t.getAttribute(n))||""},removeAttr:function(t,n){var r=e.attrMap[n];r===!0?t[n]=!1:"string"==typeof r?t[r]="":t.removeAttribute(n)},contentText:function(t){return"string"==typeof t?t:t||0===t?""+t:""},after:function(e,n){var r=e[e.length-1];r.nextSibling?t.insertBefore(r.parentNode,n,r.nextSibling):t.appendChild(r.parentNode,n)},replace:function(n,r){e.after(n,r),t.remove(t.$(n))}};return function(){var t=document.createElement("div");t.setAttribute("style","width: 5px"),t.setAttribute("style","width: 10px"),e.attrMap.style=function(t,e){t.style.cssText=e||""}}(),e}(__m3),__m21=function(can,elements){var newLine=/(\r|\n)+/g,clean=function(t){return t.split("\\").join("\\\\").split("\n").join("\\n").split('"').join('\\"').split("	").join("\\t")},getTag=function(t,e,n){if(t)return t;for(;e.length>n;){if("<"===e[n]&&elements.reverseTagMap[e[n+1]])return elements.reverseTagMap[e[n+1]];n++}return""},bracketNum=function(t){return t.split("{").length-t.split("}").length},myEval=function(script){eval(script)},attrReg=/([^\s]+)[\s]*=[\s]*$/,startTxt="var ___v1ew = [];",finishTxt="return ___v1ew.join('')",put_cmd="___v1ew.push(\n",insert_cmd=put_cmd,htmlTag=null,quote=null,beforeQuote=null,rescan=null,getAttrName=function(){var t=beforeQuote.match(attrReg);return t&&t[1]},status=function(){return quote?"'"+getAttrName()+"'":htmlTag?1:0},top=function(t){return t[t.length-1]},automaticCustomElementCharacters=/[-\:]/,Scanner;return can.view.Scanner=Scanner=function(t){can.extend(this,{text:{},tokens:[]},t),this.text.options=this.text.options||"",this.tokenReg=[],this.tokenSimple={"<":"<",">":">",'"':'"',"'":"'"},this.tokenComplex=[],this.tokenMap={};for(var e,n=0;e=this.tokens[n];n++)e[2]?(this.tokenReg.push(e[2]),this.tokenComplex.push({abbr:e[1],re:RegExp(e[2]),rescan:e[3]})):(this.tokenReg.push(e[1]),this.tokenSimple[e[1]]=e[0]),this.tokenMap[e[0]]=e[1];this.tokenReg=RegExp("("+this.tokenReg.slice(0).concat(["<",">",'"',"'"]).join("|")+")","g")},Scanner.attributes={},Scanner.regExpAttributes={},Scanner.attribute=function(t,e){"string"==typeof t?Scanner.attributes[t]=e:Scanner.regExpAttributes[t]={match:t,callback:e}},Scanner.hookupAttributes=function(t,e){can.each(t&&t.attrs||[],function(n){t.attr=n,Scanner.attributes[n]?Scanner.attributes[n](t,e):can.each(Scanner.regExpAttributes,function(r){r.match.test(n)&&r.callback(t,e)})})},Scanner.tag=function(t,e){window.html5&&(window.html5.elements+=" "+t,window.html5.shivDocument()),Scanner.tags[t.toLowerCase()]=e},Scanner.tags={},Scanner.hookupTag=function(t){var e=can.view.getHooks();return can.view.hook(function(n){can.each(e,function(t){t(n)});var r=t.tagName,i=t.options.read("helpers._tags."+r,{isArgument:!0,proxyMethods:!1}).value,a=i||Scanner.tags[r],s=t.scope,o=a?a(n,t):s;if(o&&t.subtemplate){s!==o&&(s=s.add(o));var u=can.view.frag(t.subtemplate(s,t.options));can.appendChild(n,u)}can.view.Scanner.hookupAttributes(t,n)})},Scanner.prototype={helpers:[],scan:function(t,e){var n,r=[],i=0,a=this.tokenSimple,s=this.tokenComplex;t=t.replace(newLine,"\n"),this.transform&&(t=this.transform(t)),t.replace(this.tokenReg,function(e,n){var o=arguments[arguments.length-2];if(o>i&&r.push(t.substring(i,o)),a[e])r.push(e);else for(var u,c=0;u=s[c];c++)if(u.re.test(e)){r.push(u.abbr),u.rescan&&r.push(u.rescan(n));break}i=o+n.length}),t.length>i&&r.push(t.substr(i));var o,u,c,h,l="",p=[startTxt+(this.text.start||"")],f=function(t,e){p.push(put_cmd,'"',clean(t),'"'+(e||"")+");")},d=[],g=null,m=!1,_={attributeHookups:[],tagHookups:[],lastTagHookup:""},v=function(){_.lastTagHookup=_.tagHookups.pop()+_.tagHookups.length},b="",y=[],w=!1,x=!1,k=0,A=this.tokenMap;for(htmlTag=quote=beforeQuote=null;(c=r[k++])!==undefined;){if(null===g)switch(c){case A.left:case A.escapeLeft:case A.returnLeft:m=htmlTag&&1;case A.commentLeft:g=c,l.length&&f(l),l="";break;case A.escapeFull:m=htmlTag&&1,rescan=1,g=A.escapeLeft,l.length&&f(l),rescan=r[k++],l=rescan.content||rescan,rescan.before&&f(rescan.before),r.splice(k,0,A.right);break;case A.commentFull:break;case A.templateLeft:l+=A.left;break;case"<":0!==r[k].indexOf("!--")&&(htmlTag=1,m=0),l+=c;break;case">":htmlTag=0;var M="/"===l.substr(l.length-1)||"--"===l.substr(l.length-2),C="";if(_.attributeHookups.length&&(C="attrs: ['"+_.attributeHookups.join("','")+"'], ",_.attributeHookups=[]),b+_.tagHookups.length!==_.lastTagHookup&&b===top(_.tagHookups))M&&(l=l.substr(0,l.length-1)),p.push(put_cmd,'"',clean(l),'"',",can.view.Scanner.hookupTag({tagName:'"+b+"',"+C+"scope: "+(this.text.scope||"this")+this.text.options),M?(p.push("}));"),l="/>",v()):"<"===r[k]&&r[k+1]==="/"+b?(p.push("}));"),l=c,v()):(p.push(",subtemplate: function("+this.text.argNames+"){\n"+startTxt+(this.text.start||"")),l="");else if(m||!w&&elements.tagToContentPropMap[y[y.length-1]]||C){var N=",can.view.pending({"+C+"scope: "+(this.text.scope||"this")+this.text.options+'}),"';M?f(l.substr(0,l.length-1),N+'/>"'):f(l,N+'>"'),l="",m=0}else l+=c;(M||w)&&(y.pop(),b=y[y.length-1],w=!1),_.attributeHookups=[];break;case"'":case'"':if(htmlTag)if(quote&&quote===c){quote=null;var T=getAttrName();if(Scanner.attributes[T]?_.attributeHookups.push(T):can.each(Scanner.regExpAttributes,function(t){t.match.test(T)&&_.attributeHookups.push(T)}),x){l+=c,f(l),p.push(finishTxt,"}));\n"),l="",x=!1;break}}else if(null===quote&&(quote=c,beforeQuote=o,h=getAttrName(),"img"===b&&"src"===h||"style"===h)){f(l.replace(attrReg,"")),l="",x=!0,p.push(insert_cmd,"can.view.txt(2,'"+getTag(b,r,k)+"',"+status()+",this,function(){",startTxt),f(h+"="+c);break}default:if("<"===o){b="!--"===c.substr(0,3)?"!--":c.split(/\s/)[0];var O=!1;0===b.indexOf("/")&&(O=!0,n=b.substr(1)),O?(top(y)===n&&(b=n,w=!0),top(_.tagHookups)===n&&(f(l.substr(0,l.length-1)),p.push(finishTxt+"}}) );"),l="><",v())):(b.lastIndexOf("/")===b.length-1&&(b=b.substr(0,b.length-1)),"!--"!==b&&(Scanner.tags[b]||automaticCustomElementCharacters.test(b))&&("content"===b&&elements.tagMap[top(y)]&&(c=c.replace("content",elements.tagMap[top(y)])),_.tagHookups.push(b)),y.push(b))}l+=c}else switch(c){case A.right:case A.returnRight:switch(g){case A.left:u=bracketNum(l),1===u?(p.push(insert_cmd,"can.view.txt(0,'"+getTag(b,r,k)+"',"+status()+",this,function(){",startTxt,l),d.push({before:"",after:finishTxt+"}));\n"})):(i=d.length&&-1===u?d.pop():{after:";"},i.before&&p.push(i.before),p.push(l,";",i.after));break;case A.escapeLeft:case A.returnLeft:u=bracketNum(l),u&&d.push({before:finishTxt,after:"}));\n"});for(var j=g===A.escapeLeft?1:0,L={insert:insert_cmd,tagName:getTag(b,r,k),status:status(),specialAttribute:x},S=0;this.helpers.length>S;S++){var E=this.helpers[S];if(E.name.test(l)){l=E.fn(l,L),E.name.source===/^>[\s]*\w*/.source&&(j=0);break}}"object"==typeof l?l.raw&&p.push(l.raw):x?p.push(insert_cmd,l,");"):p.push(insert_cmd,"can.view.txt(\n"+("string"==typeof status()||j)+",\n'"+b+"',\n"+status()+",\n"+"this,\nfunction(){ "+(this.text.escape||"")+"return ",l,u?startTxt:"}));\n"),rescan&&rescan.after&&rescan.after.length&&(f(rescan.after.length),rescan=null)}g=null,l="";break;case A.templateLeft:l+=A.left;break;default:l+=c}o=c}l.length&&f(l),p.push(";");var R=p.join(""),D={out:(this.text.outStart||"")+R+" "+finishTxt+(this.text.outEnd||"")};return myEval.call(D,"this.fn = (function("+this.text.argNames+"){"+D.out+"});\r\n//# sourceURL="+e+".js"),D}},can.view.Scanner.tag("content",function(t,e){return e.scope}),Scanner}(__m15,__m22),__m25=function(t){var e=!0;try{document.createTextNode("")._=0}catch(n){e=!1}var r={},i={},a="ejs_"+Math.random(),s=0,o=function(t){if(e||3!==t.nodeType)return t[a]?t[a]:(++s,t[a]=(t.nodeName?"element_":"obj_")+s);for(var n in i)if(i[n]===t)return n;return++s,i["text_"+s]=t,"text_"+s},u=[].splice,c={id:o,update:function(e,n){t.each(e.childNodeLists,function(t){c.unregister(t)}),e.childNodeLists=[],t.each(e,function(t){delete r[o(t)]}),n=t.makeArray(n),t.each(n,function(t){r[o(t)]=e});var i=e.length,a=e[0];u.apply(e,[0,i].concat(n));for(var s=e;s=s.parentNodeList;)u.apply(s,[t.inArray(a,s),i].concat(n))},register:function(t,e,n){if(t.unregistered=e,t.childNodeLists=[],!n){if(t.length>1)throw"does not work";var i=o(t[0]);n=r[i]}return t.parentNodeList=n,n&&n.childNodeLists.push(t),t},unregister:function(e){e.isUnregistered||(e.isUnregistered=!0,delete e.parentNodeList,t.each(e,function(t){var e=o(t);delete r[e]}),e.unregistered&&e.unregistered(),t.each(e.childNodeLists,function(t){c.unregister(t)}))},nodeMap:r};return c}(__m3,__m22),__m24=function(t,e,n,r){var i=function(e,n,r){var i=!1,a=function(){return i||(i=!0,r(s),t.unbind.call(e,"removed",a)),!0},s={teardownCheck:function(t){return t?!1:a()}};return t.bind.call(e,"removed",a),n(s),s},a=function(t,e,n){return i(t,function(){e.bind("change",n)},function(t){e.unbind("change",n),t.nodeList&&r.unregister(t.nodeList)})},s=function(t){return(t||"").replace(/['"]/g,"").split("=")},o=[].splice,u={list:function(n,a,s,c,h){var l,p=[n],f=[],d=[],g=function(n,i,a){var u=document.createDocumentFragment(),h=[],l=[];if(t.each(i,function(e,n){var i=t.compute(n+a),o=s.call(c,e,i),f=t.view.fragment(o);h.push(r.register(t.makeArray(f.childNodes),undefined,p)),u.appendChild(t.view.hookup(f)),l.push(i)}),f[a]){var g=f[a][0];t.insertBefore(g.parentNode,u,g)}else e.after(0===a?[_]:f[a-1],u);o.apply(f,[a,0].concat(h)),o.apply(d,[a,0].concat(l));for(var m=a+l.length,v=d.length;v>m;m++)d[m](m)},m=function(e,n,i,a){if(a||!y.teardownCheck(_.parentNode)){var s=f.splice(i,n.length),o=[];t.each(s,function(t){[].push.apply(o,t),r.update(t,[]),r.unregister(t)}),d.splice(i,n.length);for(var u=i,c=d.length;c>u;u++)d[u](u);t.remove(t.$(o))}},_=document.createTextNode(""),v=function(){l&&l.unbind&&l.unbind("add",g).unbind("remove",m),m({},{length:f.length},0,!0)},b=function(t,e){v(),l=e||[],l.bind&&l.bind("add",g).bind("remove",m),g({},l,0)};h=e.getParentNode(n,h);var y=i(h,function(){t.isFunction(a)&&a.bind("change",b)},function(){t.isFunction(a)&&a.unbind("change",b),v()});u.replace(p,_,y.teardownCheck),b({},t.isFunction(a)?a():a)},html:function(n,i,s){var o;s=e.getParentNode(n,s),o=a(s,i,function(t,e){var n=u[0].parentNode;n&&c(e),o.teardownCheck(u[0].parentNode)});var u=[n],c=function(n){var i=t.view.fragment(""+n),a=t.makeArray(u);r.update(u,i.childNodes),i=t.view.hookup(i,s),e.replace(a,i)};o.nodeList=u,r.register(u,o.teardownCheck),c(i())},replace:function(n,i,a){var s,o=n.slice(0);return r.register(n,a),"string"==typeof i?s=t.view.fragment(i):11!==i.nodeType?(s=document.createDocumentFragment(),s.appendChild(i)):s=i,r.update(n,s.childNodes),"string"==typeof i&&(s=t.view.hookup(s,n[0].parentNode)),e.replace(o,s),n},text:function(t,n,r){var i=e.getParentNode(t,r),s=a(i,n,function(t,e){"unknown"!=typeof o.nodeValue&&(o.nodeValue=""+e),s.teardownCheck(o.parentNode)}),o=document.createTextNode(n());s.nodeList=u.replace([t],o,s.teardownCheck)},attributes:function(t,n,r){var i=function(n){var r=s(n),i=r.shift();i!==o&&o&&e.removeAttr(t,o),i&&(e.setAttr(t,i,r.join("=")),o=i)};if(a(t,n,function(t,e){i(e)}),arguments.length>=3)var o=s(r)[0];else i(n())},attributePlaceholder:"__!!__",attributeReplace:/__!!__/g,attribute:function(n,r,i){a(n,i,function(){e.setAttr(n,r,c.render())});var s,o=t.$(n);s=t.data(o,"hooks"),s||t.data(o,"hooks",s={});var c,h=e.getAttr(n,r),l=h.split(u.attributePlaceholder),p=[];p.push(l.shift(),l.join(u.attributePlaceholder)),s[r]?s[r].computes.push(i):s[r]={render:function(){var t=0,n=h?h.replace(u.attributeReplace,function(){return e.contentText(c.computes[t++]())}):e.contentText(c.computes[t++]());return n},computes:[i],batchNum:undefined},c=s[r],p.splice(1,0,i()),e.setAttr(n,r,p.join(""))},specialAttribute:function(t,n,r){a(t,r,function(r,i){e.setAttr(t,n,h(i))}),e.setAttr(t,n,h(r()))}},c=/(\r|\n)+/g,h=function(t){var n=/^["'].*["']$/;return t=t.replace(e.attrReg,"").replace(c,""),n.test(t)?t.substr(1,t.length-2):t};return t.view.live=u,t.view.nodeLists=r,t.view.elements=e,u}(__m3,__m22,__m15,__m25),__m23=function(t,e,n){var r,i=[],a=function(t){var n=e.tagMap[t]||"span";return"span"===n?"@@!!@@":"<"+n+">"+a(n)+"</"+n+">"},s=function(e,n){if("string"==typeof e)return e;if(!e&&0!==e)return"";var r=e.hookup&&function(t,n){e.hookup.call(e,t,n)}||"function"==typeof e&&e;return r?n?"<"+n+" "+t.view.hook(r)+"></"+n+">":(i.push(r),""):""+e},o=function(e,n){return"string"==typeof e||"number"==typeof e?t.esc(e):s(e,n)},u=!1,c=function(){};return t.extend(t.view,{live:n,setupLists:function(){var e,n=t.view.lists;return t.view.lists=function(t,n){return e={list:t,renderer:n},Math.random()},function(){return t.view.lists=n,e}},pending:function(e){var n=t.view.getHooks();return t.view.hook(function(r){t.each(n,function(t){t(r)}),t.view.Scanner.hookupAttributes(e,r)})},getHooks:function(){var t=i.slice(0);return r=t,i=[],t},onlytxt:function(t,e){return o(e.call(t))},txt:function(h,l,p,f,d){var g,m,_,v,b,y=e.tagMap[l]||"span",w=!1;if(u)m=d.call(f);else{("string"==typeof p||1===p)&&(u=!0);var x=t.view.setupLists();_=function(){g.unbind("change",c)},g=t.compute(d,f,!1),g.bind("change",c),v=x(),m=g(),u=!1,w=g.hasDependencies}if(v)return _&&_(),"<"+y+t.view.hook(function(t,e){n.list(t,v.list,v.renderer,f,e)})+"></"+y+">";if(!w||"function"==typeof m)return _&&_(),(u||2===h||!h?s:o)(m,0===p&&y);var k=e.tagToContentPropMap[l];return 0!==p||k?1===p?(i.push(function(t){n.attributes(t,g,g()),_()}),g()):2===h?(b=p,i.push(function(t){n.specialAttribute(t,b,g),_()}),g()):(b=0===p?k:p,(0===p?r:i).push(function(t){n.attribute(t,b,g),_()}),n.attributePlaceholder):"<"+y+t.view.hook(h&&"object"!=typeof m?function(t,e){n.text(t,g,e),_()}:function(t,e){n.html(t,g,e),_()})+">"+a(y)+"</"+y+">"}}),t}(__m15,__m22,__m24,__m2),__m20=function(t){var e=t.extend,n=function(t){if(this.constructor!==n){var r=new n(t);return function(t,e){return r.render(t,e)}}return"function"==typeof t?(this.template={fn:t},undefined):(e(this,t),this.template=this.scanner.scan(this.text,this.name),undefined)};return t.EJS=n,n.prototype.render=function(t,e){return t=t||{},this.template.fn.call(t,t,new n.Helpers(t,e||{}))},e(n.prototype,{scanner:new t.view.Scanner({text:{outStart:"with(_VIEW) { with (_CONTEXT) {",outEnd:"}}",argNames:"_CONTEXT,_VIEW"},tokens:[["templateLeft","<%%"],["templateRight","%>"],["returnLeft","<%=="],["escapeLeft","<%="],["commentLeft","<%#"],["left","<%"],["right","%>"],["returnRight","%>"]],helpers:[{name:/\s*\(([\$\w]+)\)\s*->([^\n]*)/,fn:function(t){var e=/\s*\(([\$\w]+)\)\s*->([^\n]*)/,n=t.match(e);return"can.proxy(function(__){var "+n[1]+"=can.$(__);"+n[2]+"}, this);"}}],transform:function(t){return t.replace(/<%([\s\S]+?)%>/gm,function(t,e){var n,r,i=[];e.replace(/[{}]/gm,function(t,e){i.push([t,e])});do for(n=!1,r=i.length-2;r>=0;r--)if("{"===i[r][0]&&"}"===i[r+1][0]){i.splice(r,2),n=!0;break}while(n);if(i.length>=2){var a,s=["<%"],o=0;for(r=0;a=i[r];r++)s.push(e.substring(o,o=a[1])),"{"===a[0]&&i.length-1>r||"}"===a[0]&&r>0?s.push("{"===a[0]?"{ %><% ":" %><% }"):s.push(a[0]),++o;return s.push(e.substring(o),"%>"),s.join("")}return"<%"+e+"%>"})}})}),n.Helpers=function(t,n){this._data=t,this._extras=n,e(this,n)},n.Helpers.prototype={list:function(e,n){t.each(e,function(t,r){n(t,r,e)})},each:function(e,n){t.isArray(e)?this.list(e,n):t.view.lists(e,n)}},t.view.register({suffix:"ejs",script:function(t,e){return"can.EJS(function(_CONTEXT,_VIEW) { "+new n({text:e,name:t}).template.out+" })"},renderer:function(t,e){return n({text:e,name:t})}}),t}(__m3,__m15,__m2,__m13,__m21,__m23);window.can=__m5})();